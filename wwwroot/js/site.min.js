function textAreaAdjust(n){n.style.height="1px";n.style.height=25+n.scrollHeight+"px"}function initMap(){var n=new google.maps.Map(document.getElementById("map"),{center:{lat:40.445982,lng:-79.997847},zoom:13,clickableIcons:!1,mapTypeControl:!1}),i,r,u,f,e,o;$("#formdata").validate({messages:{Issue:"This field is required"}});i=$("#formdata").validate();$("#Issue").change(function(){i.element("#Issue")});$("#back").on("click",function(){table.columns(1).search("").draw();for(var t=0;t<infoWindows.length;t++)infoWindows[t].close();$("#search").val(null);$("#search").keyup();table.search("").draw();$("#back").hide();$("#form").hide();table.rows(".parent").nodes().to$().find("td:first-child").trigger("click");helper.innerHTML="Select a facility from the map, <br/> or search the table";n.setCenter({lat:40.445982,lng:-79.997847});n.setZoom(13)});r=document.getElementById("tablecontainer");n.controls[google.maps.ControlPosition.LEFT_CENTER].push(r);var t=[],s=$("#shapes").text(),h=$.parseJSON(s);h.forEach(function(i,r){var e=i[0].oid,f,u,o,s;for(t=[],i.forEach(function(n){t.push(new google.maps.LatLng(parseFloat(n.Lat),parseFloat(n.Lng)))}),f=new google.maps.Polygon({paths:t,strokeColor:"rgb(0, 51, 255)",strokeOpacity:.6,strokeWeight:4,fillColor:"rgb(44, 62, 80)",fillOpacity:.2}),f.setMap(n),u=new google.maps.LatLngBounds,r=0;r<t.length;r++)r>0&&u.extend(t[r]);o=u.getCenter();s=document.getElementsByClassName("centerrelay");Array.from(s).forEach(function(n){n.innerHTML==e&&(n.innerHTML=o)});f.addListener("click",function(){var t,r,i;for($("#search").val(null),$("#search").keyup(),table.search("").draw(),t=0;t<infoWindows.length;t++)infoWindows[t].close();n.setCenter(u.getCenter());n.setZoom(16);table.columns(1).search(e).draw();href_formatted='<a><span style="font-size: 22px;" onclick="openfromInfowindow()">Report an issue<\/span><\/a>';facilityname=$("td").eq(1).find("#name").text();neighborhood=$("td").eq(2).find("#neighborhood").text();image=$("td").eq(2).find("#link").text();r="<div class='text-center'><img style='width:300px; border-radius: 10px 10px 10px 10px;' src="+image+"><br/><br/><b>"+facilityname+"<\/b> <br/>"+neighborhood+"<br/>"+href_formatted+"<\/div>";i=new google.maps.InfoWindow({content:r,center:u.getCenter(),position:u.getCenter()});infoWindows.push(i);i.open(n);helper.innerHTML="This the one?<br/><a onclick='openfromInfowindow()'><font style='color:white;'>Report the issue<\/font><\/a>";$("#formname").val(facilityname);$("#back").show()})});u=function(){var t=$(this).parent().parent().find("#centerrelay").text(),f,r;t=t.replace(/[{()}]/g,"");var u=t.indexOf(","),e=parseFloat(t.substring(0,u)),o=parseFloat(t.substring(u+1,t.length)),i=new google.maps.LatLng(e,o);n.setCenter(i);n.setZoom(16);href_formatted='<a><span style="font-size: 22px;" onclick="openfromInfowindow()">Report an issue<\/span><\/a>';facilityname=$("td").eq(1).find("#name").text();neighborhood=$("td").eq(2).find("#neighborhood").text();image=$("td").eq(2).find("#link").text();f="<div class='text-center'><img style='width:300px; border-radius: 10px 10px 10px 10px;' src="+image+"><br/><br/><b>"+facilityname+"<\/b> <br/>"+neighborhood+"<br/>"+href_formatted+"<\/div>";r=new google.maps.InfoWindow({content:f,center:i,position:i});infoWindows.push(r);r.open(n);helper.innerHTML="This the one?<br/><a onclick='openfromInfowindow()'><font style='color:white;'>Report the issue<\/font><\/a>";$("#formname").val(facilityname);$("#back").show()};Array.from(tablebuttons).forEach(function(n){n.addEventListener("click",u)});f=document.getElementById("back");n.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(f);e=document.getElementById("helpercontainer");n.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(e);o=document.getElementById("form");n.controls[google.maps.ControlPosition.RIGHT_TOP].push(o)}function openfromInfowindow(){helper.innerHTML="Describe the issue,<br/> and submit your request";$("#form").show()}function submititem(){if($("#formdata").valid()){document.getElementById("overlayloader").style.display="flex";helper.innerHTML="Sending your request to <br/> someone who can help";var n=$("#formdata").serialize(),t=n.replace(/\'/g,"");$.ajax({url:"/Home/Submit",type:"POST",data:t,success:function(){location.reload(!0)},error:function(){alert("Failed to post.  Please try again.")}})}}function throwcontacts(){var n=$("#Issue").val();prompt=document.getElementById("alternativeprompt");n=="Pest Control"||n=="Elevators"?(prompt.innerHTML="Please contact John Sibbet at <br><b>412-600-6106<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Tree Issues"?(prompt.innerHTML="Please contact DPW Forestry at <br><b>412-665-3625<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Masonry/Concrete Work"?(prompt.innerHTML="Please contact DPW Construction at <br><b>412-782-7631<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Landscape Maintenance (Snow or Leaves)"?(prompt.innerHTML="Please contact the DPW Parks division that services your area:<br><b><a href='http://pittsburghpa.gov/dpw/park-maintenance/index.html'>Maintenance Regions<\/a><\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Door Name Lettering"?(prompt.innerHTML="Please contact DOMI Sign Shop at <br><b>412-255-2872<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Office Renovation"?(prompt.innerHTML="Please contact Chris Hornstein at <br><b>412-255-2498<\/b> or at<br>chirs.hornstein@pittsburghpa.gov",$("#alternativeprompt").show(),$("#formfields").hide()):($("#alternativeprompt").hide(),$("#formfields").show())}var classname=document.getElementsByClassName("overlaytrigger"),overlay=function(){document.getElementById("overlayloader").style.display="flex"},aWidth,Width,table,othertable,tablebuttons,getfacilityname;Array.from(classname).forEach(function(n){n.addEventListener("click",overlay)});var helper=document.getElementById("helper"),map,infoWindows=[],items=$("#items").text();items>0&&(helper.innerHTML="Your requests",aWidth=$(window).width(),Width=aWidth*.7,$("#dialog").dialog({width:Width,height:"auto",modal:!0,close:function(){helper.innerHTML="Select a facility from the map, <br/> or search the table"}}));$("#search").keyup(function(){table.search(this.value).draw()});$("#form").draggable();table=$("#dt").DataTable({searching:!0,paging:!1,ordering:!1,order:[[1,"desc"]],bLengthChange:!1});new $.fn.dataTable.Responsive(table,{});$.fn.dataTable.moment("MM/DD/YYYY HH:mm");othertable=$("#dtui").DataTable({pageLength:5,searching:!0,paging:!0,pagingType:"simple",ordering:!0,order:[[0,"desc"]],bLengthChange:!1,columnDefs:[{orderable:!1,targets:2},{orderable:!1,targets:3}]});new $.fn.dataTable.Responsive(othertable,{});tablebuttons=document.getElementsByClassName("tablebutton");getfacilityname=function(){var n=$(this).parent().parent().find("#name").text();$("#formname").val(n);table.columns(1).search(n).draw()};Array.from(tablebuttons).forEach(function(n){n.addEventListener("click",getfacilityname)});