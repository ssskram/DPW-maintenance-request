function initMap(){var t,i,r;map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.445982,lng:-79.997847},zoom:13,clickableIcons:!1,mapTypeControl:!1});t=document.getElementById("tablecontainer");map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(t);i=document.getElementById("helpercontainer");map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(i);r=document.getElementById("form");map.controls[google.maps.ControlPosition.RIGHT_TOP].push(r);var n=[],u=$("#shapes").text(),f=$.parseJSON(u);f.forEach(function(t,i){var f=t[0].oid,u,r,e,o;for(n=[],t.forEach(function(t){n.push(new google.maps.LatLng(parseFloat(t.Lat),parseFloat(t.Lng)))}),u=new google.maps.Polygon({paths:n,strokeColor:"rgb(0, 51, 255)",strokeOpacity:.6,strokeWeight:4,fillColor:"rgb(44, 62, 80)",fillOpacity:.2}),u.setMap(map),r=new google.maps.LatLngBounds,i=0;i<n.length;i++)i>0&&r.extend(n[i]);e=r.getCenter();o=document.getElementsByClassName("centerrelay");Array.from(o).forEach(function(n){n.innerHTML==f&&(n.innerHTML=e)});u.addListener("click",function(){var n,i,t;for($("#search").val(null),$("#search").keyup(),table.search("").draw(),n=0;n<infoWindows.length;n++)infoWindows[n].close();map.setCenter(r.getCenter());map.setZoom(16);table.columns(1).search(f).draw();href_formatted='<a><span style="font-size: 22px;" onclick="openfromInfowindow()">Report an issue<\/span><\/a>';facilityname=$("td").eq(1).find("#name").text();neighborhood=$("td").eq(2).find("#neighborhood").text();image=$("td").eq(2).find("#link").text();i="<div class='text-center'><img style='width:300px; border-radius: 10px 10px 10px 10px;' src="+image+"><br/><br/><b>"+facilityname+"<\/b> <br/>"+neighborhood+"<br/>"+href_formatted+"<\/div>";t=new google.maps.InfoWindow({content:i,center:r.getCenter(),position:r.getCenter()});infoWindows.push(t);t.open(map);helper.innerHTML="Not the one?<br/><a onclick='back()'><font style='color:white;'>Click here to start over<\/font><\/a>";$("#formname").val(facilityname)})})}function textAreaAdjust(n){n.style.height="1px";n.style.height=25+n.scrollHeight+"px"}function openfromInfowindow(){helper.innerHTML="Describe the issue,<br/> and submit your request";$("#form").show()}function throwcontacts(){var n=$("#Issue").val();prompt=document.getElementById("alternativeprompt");n=="Pest Control"||n=="Elevators"?(prompt.innerHTML="Please contact John Sibbet at <br><b>412-600-6106<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Tree Issues"?(prompt.innerHTML="Please contact DPW Forestry at <br><b>412-665-3625<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Masonry/Concrete Work"?(prompt.innerHTML="Please contact DPW Construction at <br><b>412-782-7631<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Landscape Maintenance (Snow or Leaves)"?(prompt.innerHTML="Please contact the DPW Parks division that services your area:<br><b><a href='http://pittsburghpa.gov/dpw/park-maintenance/index.html'>Maintenance Regions<\/a><\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Door Name Lettering"?(prompt.innerHTML="Please contact DOMI Sign Shop at <br><b>412-255-2872<\/b>",$("#alternativeprompt").show(),$("#formfields").hide()):n=="Office Renovation"?(prompt.innerHTML="Please contact Chris Hornstein at <br><b>412-255-2498<\/b> or at<br>chirs.hornstein@pittsburghpa.gov",$("#alternativeprompt").show(),$("#formfields").hide()):($("#alternativeprompt").hide(),$("#formfields").show())}function submititem(){if($("#formdata").valid()){document.getElementById("overlayloader").style.display="flex";helper.innerHTML="Sending your request to <br/> someone who can help";var n=$("#formdata").serialize(),t=n.replace(/\'/g,"");$.ajax({url:"/Home/Submit",type:"POST",data:t,success:function(){location.reload(!0)},error:function(){alert("Failed to post.  Please try again.")}})}}var helper=document.getElementById("helper"),map,infoWindows=[],infoWindow,items=$("#items").text(),aWidth,Width,validator,classname,overlay,table,othertable,back;items>0&&(helper.innerHTML="Your requests",aWidth=$(window).width(),Width=aWidth*.7,$("#dialog").dialog({width:Width,height:"auto",modal:!0,close:function(){helper.innerHTML="Select a facility from the map, <br/> or search the table"}}));$("#formdata").validate({messages:{Issue:"This field is required"}});validator=$("#formdata").validate();$("#Issue").change(function(){validator.element("#Issue")});$("#form").draggable();classname=document.getElementsByClassName("overlaytrigger");overlay=function(){document.getElementById("overlayloader").style.display="flex"};Array.from(classname).forEach(function(n){n.addEventListener("click",overlay)});table=$("#dt").DataTable({searching:!0,paging:!1,ordering:!1,order:[[1,"desc"]],bLengthChange:!1});new $.fn.dataTable.Responsive(table,{});$.fn.dataTable.moment("MM/DD/YYYY HH:mm");othertable=$("#dtui").DataTable({pageLength:5,searching:!0,paging:!0,pagingType:"simple",ordering:!0,order:[[0,"desc"]],bLengthChange:!1,columnDefs:[{orderable:!1,targets:2},{orderable:!1,targets:3}]});new $.fn.dataTable.Responsive(othertable,{});var tablebuttons=document.getElementsByClassName("tablebutton"),getfacilityname=function(){var n=$(this).parent().parent().find("#name").text();$("#formname").val(n);table.columns(1).search(n).draw()},clickpolygon=function(){var n=$(this).parent().parent().find("#centerrelay").text(),u,i;n=n.replace(/[{()}]/g,"");var r=n.indexOf(","),f=parseFloat(n.substring(0,r)),e=parseFloat(n.substring(r+1,n.length)),t=new google.maps.LatLng(f,e);map.setCenter(t);map.setZoom(16);href_formatted='<a><span style="font-size: 22px;" onclick="openfromInfowindow()">Report an issue<\/span><\/a>';facilityname=$("td").eq(1).find("#name").text();neighborhood=$("td").eq(2).find("#neighborhood").text();image=$("td").eq(2).find("#link").text();u="<div class='text-center'><img style='width:300px; border-radius: 10px 10px 10px 10px;' src="+image+"><br/><br/><b>"+facilityname+"<\/b> <br/>"+neighborhood+"<br/>"+href_formatted+"<\/div>";i=new google.maps.InfoWindow({content:u,center:t,position:t});infoWindows.push(i);i.open(map);helper.innerHTML="Not the one?<br/><a onclick='back()'><font style='color:white;'>Click here to start over<\/font><\/a>";$("#formname").val(facilityname)};Array.from(tablebuttons).forEach(function(n){n.addEventListener("click",getfacilityname);n.addEventListener("click",clickpolygon)});$("#search").keyup(function(){table.search(this.value).draw()});back=function(){table.columns(1).search("").draw();for(var n=0;n<infoWindows.length;n++)infoWindows[n].close();$("#search").val(null);$("#search").keyup();table.search("").draw();$("#form").hide();table.rows(".parent").nodes().to$().find("td:first-child").trigger("click");helper.innerHTML="Select a facility from the map, <br/> or search the table";map.setCenter({lat:40.445982,lng:-79.997847});map.setZoom(13)};