@{
    ViewData["Title"] = "Work Order";
    Layout = "~/Views/Shared/_MapLayout.cshtml";
}
@model WorkOrder

<link rel="stylesheet" href="~/css/workorder.css">

<div class="row">
  <div class="col-md-12" id="column">
    <div id="map"></div>
  </div>
</div>

<div id="form" class="form-card">
    <form asp-controller="New" asp-action="Submit" method="post" class="form">
    <div class="row" style="overflow:visible">
        <div class="col-md-12" id="requestcard">
            <h3>Report an issue</h3>
            <div class="form-group" style="margin-bottom: 5px;">
                <div class="col-md-12">
                    <select asp-for="Issue" data-style="btn-info" class="selectpicker form-control" title="Select issue type" required="true" data-dropup-auto="false">
                        @foreach(var Issue in ViewBag.Issues)
                        {
                        <option>@Issue.Name</option>
                        }
                    </select>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <textarea asp-for="Description" class="form-control" onkeyup="textAreaAdjust(this)"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <textarea asp-for="LocationDescription" class="form-control" onkeyup="textAreaAdjust(this)"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <input asp-for="Phone" class="form-control">
                </div>
            </div>
            <div class="col-md-12" style="margin-top: 10px;">
                <input style="margin: 10px 0; width: 100%; font-weight: bold; border-radius: 5px;" type="Submit" id="Submit" value="Submit" class="btn btn-default overlaytrigger"/>
            </div>
        </div>
    </div>
    <input asp-for="Name" value="@ViewBag.Facility.FacilityName" id="name" hidden>
    <input value="@ViewBag.Facility.Address" id="address" hidden>
    <input value="@ViewBag.Facility.Lat" id="lat" hidden>
    <input value="@ViewBag.Facility.Long" id="long" hidden>
    <input value="@ViewBag.ImageData" id="img" hidden>
    </form>
</div>

<div class="back" id="back">
    <input style="float: left; margin: 10px; width: 150px;" type="button" value="&laquo; Back" class="btn btn-default overlaytrigger" onclick="location.href='@Url.Action("Index", "Home")'"/>
</div>

<script type="text/javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="~/js/jqueryUI.js"></script>
<script type="text/javascript" src="~/js/workorder.js"></script>
<script src=@ViewData["apistring"] async defer ></script>